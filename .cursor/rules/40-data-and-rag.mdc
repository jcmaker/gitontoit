---
description: 데이터, 인덱싱, RAG
globs:
alwaysApply: true
---

## 인덱싱 파이프라인

1. GitHub Tree 수집 → 2) 텍스트 파일만 선별 → 3) 청킹 → 4) 임베딩 저장(pgvector)

- 바이너리/대형 파일 제외(확장자 allowlist).
- 청킹: **600± 토큰**, **오버랩 120±** 슬라이딩 + 함수/문단 경계 우선.

## 검색

- 쿼리 임베딩 → pgvector top-k(코사인) → 후보 **re-rank(선택)** → 스니펫/경로 반환.
- 메타 필터(언어/경로/폴더) 지원.

## LLM 사용

- 컨텍스트는 **압축/요약** 후 주입(토큰 최소화).
- 출처(파일경로/라인 범위) **반드시** 포함.

## 스키마 원칙

- 파일/청크는 repo_id/file_id를 통해 **정규화**.
- 마이그레이션은 **비파괴적**(컬럼 추가 → 백필 → 스위치).
